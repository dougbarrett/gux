---
phase: 01-header-components
plan: 01
type: execute
---

<objective>
Create UserMenu and NotificationCenter components for the header.

Purpose: Add user profile dropdown and notification management to the application header, following established component patterns.
Output: Two new reusable components in components/ directory.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONVENTIONS.md
@.planning/codebase/STRUCTURE.md

# Existing patterns to follow:
@components/dropdown.go
@components/avatar.go
@components/badge.go
@state/websocket.go

**Tech stack available:** Go WASM, Tailwind CSS, syscall/js
**Established patterns:** Props struct + factory function, Dropdown with outside-click-close, Badge for counts, Avatar for user display
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create UserMenu component</name>
  <files>components/user_menu.go</files>
  <action>
Create a new UserMenu component that displays a clickable avatar and dropdown menu.

Structure:
- UserMenuProps struct with: Name (string), Email (string), AvatarSrc (string, optional), OnProfile (func()), OnSettings (func()), OnLogout (func())
- UserMenu struct with element, dropdown fields
- NewUserMenu(props) factory function
- Element() method returning js.Value

Implementation:
1. Create Avatar as trigger (use existing Avatar component with AvatarSM size)
2. Create Dropdown with right-align containing:
   - Header section: Avatar (AvatarMD) + Name + Email (styled)
   - Divider
   - "Profile" menu item with user icon (üë§)
   - "Settings" menu item with gear icon (‚öôÔ∏è)
   - Divider
   - "Logout" menu item with door icon (üö™), styled in red/danger color
3. Use IconDropdown pattern but with Avatar as trigger instead of icon
4. Build tag: //go:build js && wasm

Follow dropdown.go conventions for menu styling. Use Tailwind classes matching existing components.
  </action>
  <verify>go build ./components/... compiles without errors</verify>
  <done>UserMenu component exists with avatar trigger, dropdown menu with profile/settings/logout items, follows established patterns</done>
</task>

<task type="auto">
  <name>Task 2: Create NotificationCenter component</name>
  <files>components/notification_center.go</files>
  <action>
Create a NotificationCenter component with bell icon trigger, unread badge, and notifications dropdown.

Structure:
- Notification struct with: ID (string), Title (string), Message (string), Time (string), Read (bool), Type (string - "info"/"success"/"warning"/"error")
- NotificationCenterProps struct with: Notifications ([]Notification), OnMarkRead (func(id string)), OnMarkAllRead (func()), OnClear (func()), OnNotificationClick (func(id string))
- NotificationCenter struct with: element, dropdown, badgeEl, notifications fields
- NewNotificationCenter(props) factory
- Element(), SetNotifications([]Notification), UnreadCount() methods

Implementation:
1. Bell icon button trigger (use SVG: `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>`)
2. Unread count badge (Badge component, BadgeError variant, rounded, positioned absolute top-right of bell)
3. Dropdown panel (right-aligned, fixed width ~320px) containing:
   - Header: "Notifications" title + "Mark all read" link button
   - Scrollable list of notifications (max-h-80 overflow-y-auto)
   - Each notification item: type indicator (colored dot), title (bold), message (truncated), time (muted), hover highlight, click handler
   - Empty state: "No notifications" centered text when list empty
   - Footer: "Clear all" button (text style)
4. Hide badge when unread count is 0
5. Build tag: //go:build js && wasm

Use existing Dropdown pattern but with custom content instead of DropdownItem list. Style notification items with appropriate padding, borders between items.
  </action>
  <verify>go build ./components/... compiles without errors</verify>
  <done>NotificationCenter component exists with bell icon, unread badge, scrollable notification list, mark-read/clear functionality, follows established patterns</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go build ./components/...` succeeds without errors
- [ ] user_menu.go has build tag, follows Props pattern, uses existing Avatar/Dropdown
- [ ] notification_center.go has build tag, bell icon, badge, dropdown list
- [ ] Both files follow project naming conventions (snake_case)
</verification>

<success_criteria>

- Both components compile successfully
- UserMenu has avatar trigger, profile/settings/logout menu items
- NotificationCenter has bell trigger, unread badge, notification list
- Components follow established patterns from dropdown.go, avatar.go, badge.go
- Ready for integration into Header component
</success_criteria>

<output>
After completion, create `.planning/phases/01-header-components/01-01-SUMMARY.md`
</output>
