---
phase: 10-visual-accessibility
plan: 01
type: execute
domain: go-wasm
---

<objective>
Add visible focus indicators to interactive components for keyboard navigation accessibility.

Purpose: Ensure keyboard users can clearly see which element has focus (WCAG 2.4.7 Focus Visible).
Output: Toggle with visible focus ring, consistent focus-visible styling across interactive components.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-accessibility-audit/A11Y-AUDIT.md

# Prior phase context:
@.planning/phases/09-keyboard-navigation/09-04-SUMMARY.md

# Key files:
@components/toggle.go
@components/dropdown.go
@components/accordion.go
@components/tabs.go
@components/combobox.go
@components/datepicker.go

**Tech stack available:** Tailwind CSS focus utilities (focus:ring-2, focus-visible:)
**Established patterns:** focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500

**Issues being addressed:**
- P2: Toggle lacks visible focus indicator (2.4.7)
- P2: Focus-visible styling inconsistency across components (2.4.7)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add visible focus ring to Toggle component</name>
  <files>components/toggle.go</files>
  <action>
Add focus ring styling to the toggle track element. The toggle track (line 78) currently has:
- `tabindex="0"` for keyboard focus
- `role="switch"` with aria-checked
- No focus styling

Add focus ring by updating the toggle className to include focus styling. Since this is a custom div (not a native input), use outline styling that works with tabindex:

1. Add to toggle element className: `focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`
2. The ring-offset-2 provides visual separation from the track background

Use Tailwind focus utilities consistent with other form controls in the codebase.
  </action>
  <verify>
Build succeeds: `cd example && make build`
Visually verify: Toggle shows blue ring when focused via Tab key
  </verify>
  <done>Toggle displays visible 2px blue focus ring with offset when keyboard focused</done>
</task>

<task type="auto">
  <name>Task 2: Audit and update focus-visible styling on interactive components</name>
  <files>components/dropdown.go, components/accordion.go, components/tabs.go, components/combobox.go, components/datepicker.go</files>
  <action>
Audit each interactive component for consistent focus styling:

1. **Dropdown trigger** (dropdown.go) - Verify trigger button has focus ring. Add if missing.

2. **Accordion headers** (accordion.go) - Currently has `focus:outline-none focus:bg-gray-50`. Add visible focus ring: `focus:ring-2 focus:ring-inset focus:ring-blue-500` (inset because full-width).

3. **Tabs** (tabs.go) - Tab buttons need focus ring for keyboard navigation. Add `focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset` to tab buttons.

4. **Combobox input** (combobox.go) - Verify input has focus ring (should have it from input pattern).

5. **DatePicker** (datepicker.go):
   - Input field: Verify focus ring exists
   - Calendar day cells: Add focus ring for keyboard navigation. Use `focus:ring-2 focus:ring-blue-500 focus:ring-inset` on focusable day cells.

Pattern: Use `focus:ring-inset` for elements that span full width or have backgrounds. Use standard `focus:ring-2 focus:ring-blue-500` for standalone buttons.

Do NOT change focus:outline-none - keep it to prevent double indicators.
  </action>
  <verify>
Build succeeds: `cd example && make build`
Tab through each component type and verify focus ring appears
  </verify>
  <done>All interactive components (Dropdown, Accordion, Tabs, Combobox, DatePicker) display consistent visible focus rings when keyboard focused</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd example && make build` succeeds without errors
- [ ] Toggle shows focus ring when tabbed to
- [ ] Accordion headers show focus ring when tabbed to
- [ ] Tab buttons show focus ring when tabbed to
- [ ] DatePicker calendar cells show focus ring during keyboard navigation
- [ ] No focus ring appears on mouse click (focus-visible behavior via browser)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No build errors
- WCAG 2.4.7 Focus Visible satisfied for all interactive components
</success_criteria>

<output>
After completion, create `.planning/phases/10-visual-accessibility/10-01-SUMMARY.md`
</output>
