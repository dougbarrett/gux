---
phase: 08-aria-semantic-markup
plan: 05
type: execute
domain: go-wasm
---

<objective>
Add ARIA attributes to Dropdown triggers, Sidebar navigation, and Breadcrumbs.

Purpose: Enable screen reader users to understand navigation state and menu interactions.
Output: Three components with proper trigger states, current page indication, and accessible separators.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-accessibility-audit/A11Y-AUDIT.md

# Source files to modify:
@components/dropdown.go
@components/sidebar.go
@components/breadcrumbs.go

**From Phase 7 Audit - Navigation Issues:**
- Dropdown: Trigger button lacks aria-expanded, aria-haspopup
- Sidebar: Missing aria-current="page" on active nav item
- Breadcrumbs: Separator characters should be aria-hidden

**WAI-ARIA Patterns:**
- Menu button: aria-expanded, aria-haspopup="menu" on trigger
- Navigation: aria-current="page" on current page link
- Breadcrumbs: nav with aria-label, separators as aria-hidden decorative
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ARIA menu button pattern to Dropdown trigger</name>
  <files>components/dropdown.go</files>
  <action>
Update Dropdown component trigger button:

1. Trigger button element:
   - Add `aria-haspopup="menu"` (indicates it opens a menu)
   - Add `aria-expanded="false"` initially
   - Generate unique ID for menu: `dropdown-menu-{uuid}`
   - Add `aria-controls={menu-id}` pointing to dropdown menu

2. Dropdown menu container:
   - Add `role="menu"` on the dropdown container
   - Set `id={menu-id}` matching aria-controls

3. Menu items (if not already done):
   - Ensure items have `role="menuitem"`
   - Disabled items should have `aria-disabled="true"`

4. Update toggle logic:
   - Set `aria-expanded="true"` when menu opens
   - Set `aria-expanded="false"` when menu closes

5. Close button (if exists inside dropdown):
   - Add `aria-label` if it's just an icon

Pattern: Menu button pattern connects trigger to popup menu.
  </action>
  <verify>Build passes: `cd example && make build` succeeds without errors</verify>
  <done>Dropdown trigger has aria-haspopup="menu", aria-expanded toggles with open state, menu has role="menu"</done>
</task>

<task type="auto">
  <name>Task 2: Add aria-current to Sidebar navigation</name>
  <files>components/sidebar.go</files>
  <action>
Update Sidebar component for navigation landmarks:

1. Sidebar nav container:
   - Ensure it uses `nav` element or has `role="navigation"`
   - Add `aria-label="Main navigation"` (or appropriate label)

2. Navigation items/links:
   - Add support for marking active item with `aria-current="page"`
   - When item is selected/active, set `aria-current="page"`
   - When item is not active, remove aria-current attribute (don't set to "false")

3. Update SetActive or equivalent method:
   - Clear aria-current from previously active item
   - Set `aria-current="page"` on newly active item

4. If sidebar has sections/groups:
   - Consider adding `aria-label` to each section
   - Or use headings with proper hierarchy

5. Collapse button:
   - Add `aria-label="Collapse sidebar"` or `"Expand sidebar"` based on state
   - Add `aria-expanded` reflecting sidebar state

Pattern: aria-current="page" indicates current page in navigation.
  </action>
  <verify>Build passes: `cd example && make build` succeeds without errors</verify>
  <done>Sidebar has navigation role/label, active item has aria-current="page", collapse button has aria-label and aria-expanded</done>
</task>

<task type="auto">
  <name>Task 3: Add aria-hidden to Breadcrumb separators</name>
  <files>components/breadcrumbs.go</files>
  <action>
Update Breadcrumbs component for accessibility:

1. Breadcrumb container:
   - Ensure it uses `nav` element or has `role="navigation"`
   - Add `aria-label="Breadcrumb"` (singular, per WAI-ARIA practices)

2. Breadcrumb list:
   - Use `ol` element (ordered list is semantically correct for breadcrumbs)
   - Each crumb should be an `li` element

3. Separator elements (/, >, etc.):
   - Add `aria-hidden="true"` to all separator elements
   - Separators are purely decorative and shouldn't be announced

4. Current page (last breadcrumb):
   - Add `aria-current="page"` to the last breadcrumb item
   - This should NOT be a link (current page shouldn't link to itself)

5. Links:
   - Ensure all breadcrumb links have meaningful text
   - If truncated, ensure full text is available (via title or aria-label)

Pattern: Breadcrumb separators are decorative - hide from AT.
  </action>
  <verify>Build passes: `cd example && make build` succeeds without errors</verify>
  <done>Breadcrumbs has nav with aria-label, separators have aria-hidden="true", last item has aria-current="page"</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd example && make build` succeeds without errors
- [ ] Dropdown trigger has aria-haspopup and aria-expanded
- [ ] Sidebar active item has aria-current="page"
- [ ] Breadcrumb separators have aria-hidden="true"
- [ ] Navigation elements have proper roles and labels
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No build errors
- Navigation state is clear to screen reader users
</success_criteria>

<output>
After completion, create `.planning/phases/08-aria-semantic-markup/08-05-SUMMARY.md`
</output>
