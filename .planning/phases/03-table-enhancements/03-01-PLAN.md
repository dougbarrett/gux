---
phase: 03-table-enhancements
plan: 01
type: execute
---

<objective>
Add sortable columns to the Table component with visual sort direction indicators.

Purpose: Enable users to sort table data by clicking column headers, improving data exploration.
Output: Table component with sortable columns, sort icons, and client-side sorting logic.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context
@.planning/phases/02-layout-navigation/02-02-SUMMARY.md

# Source files
@components/table.go

**Tech stack available:** Go WASM, syscall/js, Tailwind CSS
**Established patterns:** Props struct + NewXxx constructor + Element() method
**Constraining decisions:** Use emoji icons for simplicity (from 01-01)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add sort state and sortable column support</name>
  <files>components/table.go</files>
  <action>
    1. Add `Sortable bool` field to TableColumn struct
    2. Add `SortKey string` field to TableColumn (optional, defaults to Key if not set)
    3. Add sort state fields to Table struct: `sortColumn string`, `sortDirection string` ("asc"/"desc"/"")
    4. Add `OnSort func(column string, direction string)` callback to TableProps for external sort handling
    5. Modify header rendering to:
       - Make sortable columns clickable (cursor-pointer)
       - Add sort direction indicator (▲/▼) next to sortable headers
       - Show neutral indicator (⇅) for sortable columns not currently sorted
    6. Handle header click: cycle through asc → desc → none, call OnSort if provided
  </action>
  <verify>Build passes: `cd example && GOOS=js GOARCH=wasm go build -o ../dist/app.wasm ./app`</verify>
  <done>TableColumn has Sortable/SortKey fields, Table tracks sort state, headers show clickable sort indicators</done>
</task>

<task type="auto">
  <name>Task 2: Implement client-side sorting in SetData</name>
  <files>components/table.go</files>
  <action>
    1. Add `sortData(data []map[string]any) []map[string]any` method to Table
    2. If sortColumn is set, sort the data slice by that column's value
    3. Support sorting: strings (case-insensitive), numbers (int, float64), bools
    4. Handle nil values (sort to end)
    5. Call sortData in SetData before rendering rows
    6. Add `SetSort(column, direction string)` method to programmatically set sort
    7. Add `Sort(column string)` method to toggle sort on a column (for external triggering)

    Sorting should NOT mutate the original data slice - create a copy first.
  </action>
  <verify>Build passes and example app table can be sorted by clicking headers</verify>
  <done>Client-side sorting works for string/number columns, sort state persists across SetData calls</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd example && GOOS=js GOARCH=wasm go build -o ../dist/app.wasm ./app` succeeds
- [ ] Table headers show sort indicators for sortable columns
- [ ] Clicking sortable header cycles through asc/desc/none
- [ ] Data correctly sorts by column values
</verification>

<success_criteria>

- Both tasks completed
- All verification checks pass
- No TypeScript/Go errors
- Sorting works for string and numeric columns
</success_criteria>

<output>
After completion, create `.planning/phases/03-table-enhancements/03-01-SUMMARY.md`
</output>
